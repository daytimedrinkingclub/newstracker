2024-09-09 15:36:05,235 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-09-09 15:36:05,235 - INFO - [33mPress CTRL+C to quit[0m
2024-09-09 15:36:05,237 - INFO -  * Restarting with stat
2024-09-09 15:36:07,454 - WARNING -  * Debugger is active!
2024-09-09 15:36:07,461 - INFO -  * Debugger PIN: 330-279-427
2024-09-09 15:36:08,030 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/auth/v1/user "HTTP/2 200 OK"
2024-09-09 15:36:08,032 - INFO - Entering start_analysis for keyword_id: 5eb27417-cd60-4c5e-a37b-d2eece9341e0
2024-09-09 15:36:08,150 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/auth/v1/user "HTTP/2 200 OK"
2024-09-09 15:36:08,162 - INFO - User: a01fe001-ddb1-423e-aea4-a376d7740303
2024-09-09 15:36:08,703 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_keyword?select=keyword&id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0 "HTTP/2 200 OK"
2024-09-09 15:36:08,710 - INFO - Keyword: who is gonna win the  2024 US elections?
2024-09-09 15:36:08,826 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?select=%2A&keyword_id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0&status=in.%28pending%2Cprocessing%29&order=created_at.desc&limit=1 "HTTP/2 200 OK"
2024-09-09 15:36:08,827 - INFO - Active analysis query result: []
2024-09-09 15:36:08,827 - INFO - Creating new analysis
2024-09-09 15:36:08,928 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis "HTTP/2 201 Created"
2024-09-09 15:36:08,930 - INFO - Starting handle_chat for user_id: a01fe001-ddb1-423e-aea4-a376d7740303, keyword_id: 5eb27417-cd60-4c5e-a37b-d2eece9341e0, analysis_id: 3b526911-bc1a-485a-9c56-51931f8e19d8
2024-09-09 15:36:09,025 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_keyword?select=keyword&id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0 "HTTP/2 200 OK"
2024-09-09 15:36:09,027 - INFO - Attempting to save message: {'keyword_analysis_id': '3b526911-bc1a-485a-9c56-51931f8e19d8', 'role': 'user', 'content': 'who is gonna win the  2024 US elections?'}
2024-09-09 15:36:09,120 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages "HTTP/2 201 Created"
2024-09-09 15:36:09,122 - INFO - Message saved successfully: {'id': 'd920a2ab-eddb-48f0-a404-a55e42af3b42', 'keyword_analysis_id': '3b526911-bc1a-485a-9c56-51931f8e19d8', 'role': 'user', 'content': 'who is gonna win the  2024 US elections?', 'tool_name': None, 'tool_use_id': None, 'tool_input': None, 'tool_result': None, 'created_at': '2024-09-09T10:06:09.242676+00:00'}
2024-09-09 15:36:09,231 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_plan?select=%2A&user_id=eq.a01fe001-ddb1-423e-aea4-a376d7740303 "HTTP/2 200 OK"
2024-09-09 15:36:09,232 - INFO - User plans fetched successfully: [{'id': 'ee8522d2-d935-4f21-9d0d-fd5127cc62fe', 'plan': 'freemium', 'user_id': 'a01fe001-ddb1-423e-aea4-a376d7740303', 'created_at': '2024-09-09T07:33:47.586069+00:00', 'updated_at': '2024-09-09T07:33:47.586069', 'keyword_limit': None}]
2024-09-09 15:36:09,232 - INFO - User plan type: [{'id': 'ee8522d2-d935-4f21-9d0d-fd5127cc62fe', 'plan': 'freemium', 'user_id': 'a01fe001-ddb1-423e-aea4-a376d7740303', 'created_at': '2024-09-09T07:33:47.586069+00:00', 'updated_at': '2024-09-09T07:33:47.586069', 'keyword_limit': None}]
2024-09-09 15:36:09,233 - INFO - API keys retrieved: Yes
2024-09-09 15:36:09,564 - INFO - Tools loaded and returned 4 tools
2024-09-09 15:36:09,565 - INFO - Number of tools loaded: 4
2024-09-09 15:36:09,665 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages?select=%2A&keyword_analysis_id=eq.3b526911-bc1a-485a-9c56-51931f8e19d8&order=created_at "HTTP/2 200 OK"
2024-09-09 15:36:09,670 - INFO - Retrieved messages for chat_id: 3b526911-bc1a-485a-9c56-51931f8e19d8
2024-09-09 15:36:09,670 - INFO - Total tokens in conversation: 99
2024-09-09 15:36:09,670 - INFO - Conversation context length: 1
2024-09-09 15:36:09,670 - INFO - Sending request to Anthropic API
2024-09-09 15:36:09,670 - INFO - Conversation context: [
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "who is gonna win the  2024 US elections?"
      }
    ]
  }
]
2024-09-09 15:36:09,671 - INFO - Number of messages in conversation: 1
2024-09-09 15:36:10,602 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 429 Too Many Requests"
2024-09-09 15:36:10,603 - INFO - Retrying request to /v1/messages in 0.873493 seconds
2024-09-09 15:36:11,933 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 429 Too Many Requests"
2024-09-09 15:36:11,934 - INFO - Retrying request to /v1/messages in 1.718415 seconds
2024-09-09 15:36:14,185 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 429 Too Many Requests"
2024-09-09 15:36:14,186 - ERROR - Error in process_conversation: Error code: 429 - {'type': 'error', 'error': {'type': 'rate_limit_error', 'message': 'Number of request tokens has exceeded your daily rate limit (https://docs.anthropic.com/en/api/rate-limits); see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase.'}}
2024-09-09 15:36:14,303 - INFO - HTTP Request: PATCH https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?id=eq.3b526911-bc1a-485a-9c56-51931f8e19d8 "HTTP/2 200 OK"
2024-09-09 15:36:14,307 - ERROR - Error in handle_chat: Error code: 429 - {'type': 'error', 'error': {'type': 'rate_limit_error', 'message': 'Number of request tokens has exceeded your daily rate limit (https://docs.anthropic.com/en/api/rate-limits); see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase.'}}
2024-09-09 15:36:14,494 - INFO - HTTP Request: PATCH https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?id=eq.3b526911-bc1a-485a-9c56-51931f8e19d8 "HTTP/2 200 OK"
2024-09-09 15:36:14,496 - INFO - 127.0.0.1 - - [09/Sep/2024 15:36:14] "POST /startanalysis/5eb27417-cd60-4c5e-a37b-d2eece9341e0 HTTP/1.1" 200 -
2024-09-09 15:36:14,668 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/auth/v1/user "HTTP/2 200 OK"
2024-09-09 15:36:14,902 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?select=%2A&keyword_id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0&order=created_at.desc&limit=1 "HTTP/2 200 OK"
2024-09-09 15:36:14,904 - INFO - 127.0.0.1 - - [09/Sep/2024 15:36:14] "GET /task_status/5eb27417-cd60-4c5e-a37b-d2eece9341e0 HTTP/1.1" 200 -
2024-09-09 15:37:08,644 - INFO -  * Detected change in 'E:\\intern\\newstracker\\app\\services\\search.py', reloading
2024-09-09 15:37:08,844 - INFO -  * Restarting with stat
2024-09-09 15:37:10,507 - WARNING -  * Debugger is active!
2024-09-09 15:37:10,513 - INFO -  * Debugger PIN: 330-279-427
2024-09-09 15:38:04,799 - INFO -  * Detected change in 'E:\\intern\\newstracker\\app\\services\\context.py', reloading
2024-09-09 15:38:04,978 - INFO -  * Restarting with stat
2024-09-09 15:38:06,723 - WARNING -  * Debugger is active!
2024-09-09 15:38:06,727 - INFO -  * Debugger PIN: 330-279-427
2024-09-09 15:40:03,252 - INFO -  * Detected change in 'E:\\intern\\newstracker\\app\\services\\ai.py', reloading
2024-09-09 15:40:03,326 - INFO -  * Restarting with stat
2024-09-09 15:40:04,452 - WARNING -  * Debugger is active!
2024-09-09 15:40:04,455 - INFO -  * Debugger PIN: 330-279-427
2024-09-09 15:40:51,851 - INFO -  * Detected change in 'E:\\intern\\newstracker\\app\\services\\agent.py', reloading
2024-09-09 15:40:51,936 - INFO -  * Restarting with stat
2024-09-09 15:40:53,091 - WARNING -  * Debugger is active!
2024-09-09 15:40:53,093 - INFO -  * Debugger PIN: 330-279-427
2024-09-09 15:41:29,183 - INFO -  * Detected change in 'E:\\intern\\newstracker\\app\\services\\tool.py', reloading
2024-09-09 15:41:29,275 - INFO -  * Restarting with stat
2024-09-09 15:41:30,418 - WARNING -  * Debugger is active!
2024-09-09 15:41:30,420 - INFO -  * Debugger PIN: 330-279-427
2024-09-09 15:41:53,130 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/auth/v1/user "HTTP/2 200 OK"
2024-09-09 15:41:53,131 - INFO - Entering start_analysis for keyword_id: 5eb27417-cd60-4c5e-a37b-d2eece9341e0
2024-09-09 15:41:53,230 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/auth/v1/user "HTTP/2 200 OK"
2024-09-09 15:41:53,231 - INFO - User: a01fe001-ddb1-423e-aea4-a376d7740303
2024-09-09 15:41:53,608 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_keyword?select=keyword&id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0 "HTTP/2 200 OK"
2024-09-09 15:41:53,613 - INFO - Keyword: who is gonna win the  2024 US elections?
2024-09-09 15:41:53,715 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?select=%2A&keyword_id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0&status=in.%28pending%2Cprocessing%29&order=created_at.desc&limit=1 "HTTP/2 200 OK"
2024-09-09 15:41:53,716 - INFO - Active analysis query result: []
2024-09-09 15:41:53,716 - INFO - Creating new analysis
2024-09-09 15:41:53,824 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis "HTTP/2 201 Created"
2024-09-09 15:41:53,825 - INFO - Starting handle_chat for user_id: a01fe001-ddb1-423e-aea4-a376d7740303, keyword_id: 5eb27417-cd60-4c5e-a37b-d2eece9341e0, analysis_id: 1c390774-4786-4137-831e-33999956ea7e
2024-09-09 15:41:53,920 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_keyword?select=keyword&id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0 "HTTP/2 200 OK"
2024-09-09 15:41:53,922 - INFO - Attempting to save message: {'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'user', 'content': 'who is gonna win the  2024 US elections?'}
2024-09-09 15:41:54,027 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages "HTTP/2 201 Created"
2024-09-09 15:41:54,028 - INFO - Message saved successfully: {'id': 'e4f1aca7-05ec-40b5-8d29-1eb8aa915a0a', 'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'user', 'content': 'who is gonna win the  2024 US elections?', 'tool_name': None, 'tool_use_id': None, 'tool_input': None, 'tool_result': None, 'created_at': '2024-09-09T10:11:54.147408+00:00'}
2024-09-09 15:41:54,129 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_plan?select=%2A&user_id=eq.a01fe001-ddb1-423e-aea4-a376d7740303 "HTTP/2 200 OK"
2024-09-09 15:41:54,130 - INFO - User plans fetched successfully: [{'id': 'ee8522d2-d935-4f21-9d0d-fd5127cc62fe', 'plan': 'freemium', 'user_id': 'a01fe001-ddb1-423e-aea4-a376d7740303', 'created_at': '2024-09-09T07:33:47.586069+00:00', 'updated_at': '2024-09-09T07:33:47.586069', 'keyword_limit': None}]
2024-09-09 15:41:54,130 - INFO - User plan type: [{'id': 'ee8522d2-d935-4f21-9d0d-fd5127cc62fe', 'plan': 'freemium', 'user_id': 'a01fe001-ddb1-423e-aea4-a376d7740303', 'created_at': '2024-09-09T07:33:47.586069+00:00', 'updated_at': '2024-09-09T07:33:47.586069', 'keyword_limit': None}]
2024-09-09 15:41:54,130 - INFO - API keys retrieved: Yes
2024-09-09 15:41:54,328 - INFO - Tools loaded and returned 4 tools
2024-09-09 15:41:54,329 - INFO - Number of tools loaded: 4
2024-09-09 15:41:54,427 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages?select=%2A&keyword_analysis_id=eq.1c390774-4786-4137-831e-33999956ea7e&order=created_at "HTTP/2 200 OK"
2024-09-09 15:41:54,431 - INFO - Retrieved messages for chat_id: 1c390774-4786-4137-831e-33999956ea7e
2024-09-09 15:41:54,431 - INFO - Messages: data=[{'id': 'e4f1aca7-05ec-40b5-8d29-1eb8aa915a0a', 'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'user', 'content': 'who is gonna win the  2024 US elections?', 'tool_name': None, 'tool_use_id': None, 'tool_input': None, 'tool_result': None, 'created_at': '2024-09-09T10:11:54.147408+00:00'}] count=None
2024-09-09 15:41:54,431 - INFO - Conversation: [{'role': 'user', 'content': [{'type': 'text', 'text': 'who is gonna win the  2024 US elections?'}]}]
2024-09-09 15:41:54,431 - INFO - Total tokens in conversation: 99
2024-09-09 15:41:54,431 - INFO - Conversation context length: 1
2024-09-09 15:41:54,431 - INFO - Sending request to Anthropic API
2024-09-09 15:41:54,431 - INFO - Conversation context: [
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "who is gonna win the  2024 US elections?"
      }
    ]
  }
]
2024-09-09 15:41:54,431 - INFO - Number of messages in conversation: 1
2024-09-09 15:41:58,381 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-09-09 15:41:58,385 - INFO - Response Received from ANTHROPIC API: Message(id='msg_019fV1JC8EwuNFJt9hw6A94K', content=[TextBlock(text="To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", type='text'), ToolUseBlock(id='toolu_011nuV2mXj7VFzY2etsZbnmV', input={'search_query': '2024 US presidential election predictions and polls'}, name='search_web', type='tool_use')], model='claude-3-5-sonnet-20240620', role='assistant', stop_reason='tool_use', stop_sequence=None, type='message', usage=Usage(input_tokens=1072, output_tokens=108))
2024-09-09 15:41:58,387 - INFO - Attempting to save message: {'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election."}
2024-09-09 15:41:58,488 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages "HTTP/2 201 Created"
2024-09-09 15:41:58,492 - INFO - Message saved successfully: {'id': 'd8410203-90e6-44bb-a9bb-9346f126c9e4', 'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", 'tool_name': None, 'tool_use_id': None, 'tool_input': None, 'tool_result': None, 'created_at': '2024-09-09T10:11:58.606032+00:00'}
2024-09-09 15:41:58,492 - INFO - Tool use detected: search_web
2024-09-09 15:41:58,493 - INFO - Attempting to save message: {'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", 'tool_name': 'search_web', 'tool_use_id': 'toolu_011nuV2mXj7VFzY2etsZbnmV', 'tool_input': {'search_query': '2024 US presidential election predictions and polls'}}
2024-09-09 15:41:58,596 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages "HTTP/2 201 Created"
2024-09-09 15:41:58,597 - INFO - Message saved successfully: {'id': '34a997fa-ecd2-4d5e-a06f-91a91d46cf98', 'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", 'tool_name': 'search_web', 'tool_use_id': 'toolu_011nuV2mXj7VFzY2etsZbnmV', 'tool_input': {'search_query': '2024 US presidential election predictions and polls'}, 'tool_result': None, 'created_at': '2024-09-09T10:11:58.713457+00:00'}
2024-09-09 15:41:58,597 - INFO - Processing tool use: search_web for analysis 1c390774-4786-4137-831e-33999956ea7e
2024-09-09 15:41:58,688 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_api_token?select=tavily_api_key&user_id=eq.a01fe001-ddb1-423e-aea4-a376d7740303 "HTTP/2 200 OK"
2024-09-09 15:41:58,689 - INFO - Tavily API key found: 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
2024-09-09 15:41:59,589 - INFO - alllllllllllllllll Search results: {'error': 'Invalid request parameters. Please check your input.'}
2024-09-09 15:41:59,589 - INFO - Tool search_web executed successfully
2024-09-09 15:41:59,590 - INFO - Attempting to save message: {'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'user', 'content': 'Tool result', 'tool_result': "{'error': 'Invalid request parameters. Please check your input.'}", 'tool_use_id': 'toolu_011nuV2mXj7VFzY2etsZbnmV'}
2024-09-09 15:41:59,681 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages "HTTP/2 201 Created"
2024-09-09 15:41:59,685 - INFO - Message saved successfully: {'id': 'c08f110d-c63d-4ddf-a269-84a9073164a2', 'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'user', 'content': 'Tool result', 'tool_name': None, 'tool_use_id': 'toolu_011nuV2mXj7VFzY2etsZbnmV', 'tool_input': None, 'tool_result': "{'error': 'Invalid request parameters. Please check your input.'}", 'created_at': '2024-09-09T10:11:59.80536+00:00'}
2024-09-09 15:41:59,796 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_plan?select=%2A&user_id=eq.a01fe001-ddb1-423e-aea4-a376d7740303 "HTTP/2 200 OK"
2024-09-09 15:41:59,797 - INFO - User plans fetched successfully: [{'id': 'ee8522d2-d935-4f21-9d0d-fd5127cc62fe', 'plan': 'freemium', 'user_id': 'a01fe001-ddb1-423e-aea4-a376d7740303', 'created_at': '2024-09-09T07:33:47.586069+00:00', 'updated_at': '2024-09-09T07:33:47.586069', 'keyword_limit': None}]
2024-09-09 15:41:59,798 - INFO - User plan type: [{'id': 'ee8522d2-d935-4f21-9d0d-fd5127cc62fe', 'plan': 'freemium', 'user_id': 'a01fe001-ddb1-423e-aea4-a376d7740303', 'created_at': '2024-09-09T07:33:47.586069+00:00', 'updated_at': '2024-09-09T07:33:47.586069', 'keyword_limit': None}]
2024-09-09 15:41:59,798 - INFO - API keys retrieved: Yes
2024-09-09 15:42:00,006 - INFO - Tools loaded and returned 4 tools
2024-09-09 15:42:00,006 - INFO - Number of tools loaded: 4
2024-09-09 15:42:00,108 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages?select=%2A&keyword_analysis_id=eq.1c390774-4786-4137-831e-33999956ea7e&order=created_at "HTTP/2 200 OK"
2024-09-09 15:42:00,109 - INFO - Retrieved messages for chat_id: 1c390774-4786-4137-831e-33999956ea7e
2024-09-09 15:42:00,109 - INFO - Messages: data=[{'id': 'e4f1aca7-05ec-40b5-8d29-1eb8aa915a0a', 'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'user', 'content': 'who is gonna win the  2024 US elections?', 'tool_name': None, 'tool_use_id': None, 'tool_input': None, 'tool_result': None, 'created_at': '2024-09-09T10:11:54.147408+00:00'}, {'id': 'd8410203-90e6-44bb-a9bb-9346f126c9e4', 'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", 'tool_name': None, 'tool_use_id': None, 'tool_input': None, 'tool_result': None, 'created_at': '2024-09-09T10:11:58.606032+00:00'}, {'id': '34a997fa-ecd2-4d5e-a06f-91a91d46cf98', 'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", 'tool_name': 'search_web', 'tool_use_id': 'toolu_011nuV2mXj7VFzY2etsZbnmV', 'tool_input': {'search_query': '2024 US presidential election predictions and polls'}, 'tool_result': None, 'created_at': '2024-09-09T10:11:58.713457+00:00'}, {'id': 'c08f110d-c63d-4ddf-a269-84a9073164a2', 'keyword_analysis_id': '1c390774-4786-4137-831e-33999956ea7e', 'role': 'user', 'content': 'Tool result', 'tool_name': None, 'tool_use_id': 'toolu_011nuV2mXj7VFzY2etsZbnmV', 'tool_input': None, 'tool_result': "{'error': 'Invalid request parameters. Please check your input.'}", 'created_at': '2024-09-09T10:11:59.80536+00:00'}] count=None
2024-09-09 15:42:00,109 - INFO - Conversation: [{'role': 'user', 'content': [{'type': 'text', 'text': 'who is gonna win the  2024 US elections?'}]}, {'role': 'assistant', 'content': [{'type': 'text', 'text': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election."}]}, {'role': 'user', 'content': [{'type': 'text', 'text': 'Tool result'}, {'type': 'tool_result', 'tool_use_id': 'toolu_011nuV2mXj7VFzY2etsZbnmV', 'content': "{'error': 'Invalid request parameters. Please check your input.'}"}]}]
2024-09-09 15:42:00,109 - INFO - Total tokens in conversation: 623
2024-09-09 15:42:00,109 - INFO - Conversation context length: 3
2024-09-09 15:42:00,109 - INFO - Sending request to Anthropic API
2024-09-09 15:42:00,110 - INFO - Conversation context: [
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "who is gonna win the  2024 US elections?"
      }
    ]
  },
  {
    "role": "assistant",
    "content": [
      {
        "type": "text",
        "text": "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election."
      }
    ]
  },
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "Tool result"
      }
    ]
  }
]
2024-09-09 15:42:00,110 - INFO - Number of messages in conversation: 3
2024-09-09 15:42:00,567 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 429 Too Many Requests"
2024-09-09 15:42:00,569 - INFO - Retrying request to /v1/messages in 0.986232 seconds
2024-09-09 15:42:02,802 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 429 Too Many Requests"
2024-09-09 15:42:02,802 - INFO - Retrying request to /v1/messages in 1.864209 seconds
2024-09-09 15:42:05,047 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 429 Too Many Requests"
2024-09-09 15:42:05,047 - ERROR - Error in process_conversation: Error code: 429 - {'type': 'error', 'error': {'type': 'rate_limit_error', 'message': 'Number of request tokens has exceeded your daily rate limit (https://docs.anthropic.com/en/api/rate-limits); see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase.'}}
2024-09-09 15:42:05,145 - INFO - HTTP Request: PATCH https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?id=eq.1c390774-4786-4137-831e-33999956ea7e "HTTP/2 200 OK"
2024-09-09 15:42:05,148 - ERROR - Error processing tool use for search_web: Error code: 429 - {'type': 'error', 'error': {'type': 'rate_limit_error', 'message': 'Number of request tokens has exceeded your daily rate limit (https://docs.anthropic.com/en/api/rate-limits); see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase.'}}
2024-09-09 15:42:05,245 - INFO - HTTP Request: PATCH https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?id=eq.1c390774-4786-4137-831e-33999956ea7e "HTTP/2 200 OK"
2024-09-09 15:42:05,246 - ERROR - Error in process_conversation: Error code: 429 - {'type': 'error', 'error': {'type': 'rate_limit_error', 'message': 'Number of request tokens has exceeded your daily rate limit (https://docs.anthropic.com/en/api/rate-limits); see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase.'}}
2024-09-09 15:42:05,351 - INFO - HTTP Request: PATCH https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?id=eq.1c390774-4786-4137-831e-33999956ea7e "HTTP/2 200 OK"
2024-09-09 15:42:05,352 - ERROR - Error in handle_chat: Error code: 429 - {'type': 'error', 'error': {'type': 'rate_limit_error', 'message': 'Number of request tokens has exceeded your daily rate limit (https://docs.anthropic.com/en/api/rate-limits); see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase.'}}
2024-09-09 15:42:05,447 - INFO - HTTP Request: PATCH https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?id=eq.1c390774-4786-4137-831e-33999956ea7e "HTTP/2 200 OK"
2024-09-09 15:42:05,449 - INFO - 127.0.0.1 - - [09/Sep/2024 15:42:05] "POST /startanalysis/5eb27417-cd60-4c5e-a37b-d2eece9341e0 HTTP/1.1" 200 -
2024-09-09 15:42:05,606 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/auth/v1/user "HTTP/2 200 OK"
2024-09-09 15:42:05,719 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?select=%2A&keyword_id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0&order=created_at.desc&limit=1 "HTTP/2 200 OK"
2024-09-09 15:42:05,721 - INFO - 127.0.0.1 - - [09/Sep/2024 15:42:05] "GET /task_status/5eb27417-cd60-4c5e-a37b-d2eece9341e0 HTTP/1.1" 200 -
2024-09-09 15:47:13,949 - INFO -  * Detected change in 'E:\\intern\\newstracker\\app\\services\\tool.py', reloading
2024-09-09 15:47:14,067 - INFO -  * Restarting with stat
2024-09-09 15:47:15,219 - WARNING -  * Debugger is active!
2024-09-09 15:47:15,222 - INFO -  * Debugger PIN: 330-279-427
2024-09-09 15:47:57,519 - INFO -  * Detected change in 'E:\\intern\\newstracker\\app\\services\\search.py', reloading
2024-09-09 15:47:57,701 - INFO -  * Restarting with stat
2024-09-09 15:47:58,787 - WARNING -  * Debugger is active!
2024-09-09 15:47:58,790 - INFO -  * Debugger PIN: 330-279-427
2024-09-09 15:48:07,054 - INFO -  * Detected change in 'E:\\intern\\newstracker\\app\\services\\search.py', reloading
2024-09-09 15:48:07,143 - INFO -  * Restarting with stat
2024-09-09 15:48:08,303 - WARNING -  * Debugger is active!
2024-09-09 15:48:08,307 - INFO -  * Debugger PIN: 330-279-427
2024-09-09 15:48:22,491 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/auth/v1/user "HTTP/2 200 OK"
2024-09-09 15:48:22,493 - INFO - Entering start_analysis for keyword_id: 5eb27417-cd60-4c5e-a37b-d2eece9341e0
2024-09-09 15:48:22,610 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/auth/v1/user "HTTP/2 200 OK"
2024-09-09 15:48:22,612 - INFO - User: a01fe001-ddb1-423e-aea4-a376d7740303
2024-09-09 15:48:22,983 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_keyword?select=keyword&id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0 "HTTP/2 200 OK"
2024-09-09 15:48:22,987 - INFO - Keyword: who is gonna win the  2024 US elections?
2024-09-09 15:48:23,084 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?select=%2A&keyword_id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0&status=in.%28pending%2Cprocessing%29&order=created_at.desc&limit=1 "HTTP/2 200 OK"
2024-09-09 15:48:23,085 - INFO - Active analysis query result: []
2024-09-09 15:48:23,085 - INFO - Creating new analysis
2024-09-09 15:48:23,201 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis "HTTP/2 201 Created"
2024-09-09 15:48:23,203 - INFO - Starting handle_chat for user_id: a01fe001-ddb1-423e-aea4-a376d7740303, keyword_id: 5eb27417-cd60-4c5e-a37b-d2eece9341e0, analysis_id: 2a30dd6b-bae7-4d95-8032-21f8a1f20af1
2024-09-09 15:48:23,309 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_keyword?select=keyword&id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0 "HTTP/2 200 OK"
2024-09-09 15:48:23,310 - INFO - Attempting to save message: {'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'user', 'content': 'who is gonna win the  2024 US elections?'}
2024-09-09 15:48:23,397 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages "HTTP/2 201 Created"
2024-09-09 15:48:23,399 - INFO - Message saved successfully: {'id': '3ee76767-fcba-4d17-84bf-eabadfd39312', 'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'user', 'content': 'who is gonna win the  2024 US elections?', 'tool_name': None, 'tool_use_id': None, 'tool_input': None, 'tool_result': None, 'created_at': '2024-09-09T10:18:23.527997+00:00'}
2024-09-09 15:48:23,488 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_plan?select=%2A&user_id=eq.a01fe001-ddb1-423e-aea4-a376d7740303 "HTTP/2 200 OK"
2024-09-09 15:48:23,490 - INFO - User plans fetched successfully: [{'id': 'ee8522d2-d935-4f21-9d0d-fd5127cc62fe', 'plan': 'freemium', 'user_id': 'a01fe001-ddb1-423e-aea4-a376d7740303', 'created_at': '2024-09-09T07:33:47.586069+00:00', 'updated_at': '2024-09-09T07:33:47.586069', 'keyword_limit': None}]
2024-09-09 15:48:23,490 - INFO - User plan type: [{'id': 'ee8522d2-d935-4f21-9d0d-fd5127cc62fe', 'plan': 'freemium', 'user_id': 'a01fe001-ddb1-423e-aea4-a376d7740303', 'created_at': '2024-09-09T07:33:47.586069+00:00', 'updated_at': '2024-09-09T07:33:47.586069', 'keyword_limit': None}]
2024-09-09 15:48:23,491 - INFO - API keys retrieved: Yes
2024-09-09 15:48:23,700 - INFO - Tools loaded and returned 4 tools
2024-09-09 15:48:23,700 - INFO - Number of tools loaded: 4
2024-09-09 15:48:23,799 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages?select=%2A&keyword_analysis_id=eq.2a30dd6b-bae7-4d95-8032-21f8a1f20af1&order=created_at "HTTP/2 200 OK"
2024-09-09 15:48:23,804 - INFO - Retrieved messages for chat_id: 2a30dd6b-bae7-4d95-8032-21f8a1f20af1
2024-09-09 15:48:23,804 - INFO - Messages: data=[{'id': '3ee76767-fcba-4d17-84bf-eabadfd39312', 'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'user', 'content': 'who is gonna win the  2024 US elections?', 'tool_name': None, 'tool_use_id': None, 'tool_input': None, 'tool_result': None, 'created_at': '2024-09-09T10:18:23.527997+00:00'}] count=None
2024-09-09 15:48:23,804 - INFO - Conversation: [{'role': 'user', 'content': [{'type': 'text', 'text': 'who is gonna win the  2024 US elections?'}]}]
2024-09-09 15:48:23,804 - INFO - Total tokens in conversation: 99
2024-09-09 15:48:23,804 - INFO - Conversation context length: 1
2024-09-09 15:48:23,804 - INFO - Sending request to Anthropic API
2024-09-09 15:48:23,805 - INFO - Conversation context: [
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "who is gonna win the  2024 US elections?"
      }
    ]
  }
]
2024-09-09 15:48:23,805 - INFO - Number of messages in conversation: 1
2024-09-09 15:48:28,715 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-09-09 15:48:28,719 - INFO - Response Received from ANTHROPIC API: Message(id='msg_01CruB1noTWB9jnXRpEaTZpf', content=[TextBlock(text="To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", type='text'), ToolUseBlock(id='toolu_01QCXX5ZAjYRMEkEBV4by9cV', input={'search_query': '2024 US presidential election predictions and polls'}, name='search_web', type='tool_use')], model='claude-3-5-sonnet-20240620', role='assistant', stop_reason='tool_use', stop_sequence=None, type='message', usage=Usage(input_tokens=1072, output_tokens=108))
2024-09-09 15:48:28,720 - INFO - Attempting to save message: {'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election."}
2024-09-09 15:48:28,851 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages "HTTP/2 201 Created"
2024-09-09 15:48:28,854 - INFO - Message saved successfully: {'id': 'ab5851f7-c8ba-4d3a-b677-bdee4ff83d41', 'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", 'tool_name': None, 'tool_use_id': None, 'tool_input': None, 'tool_result': None, 'created_at': '2024-09-09T10:18:28.980458+00:00'}
2024-09-09 15:48:28,854 - INFO - Tool use detected: search_web
2024-09-09 15:48:28,855 - INFO - Attempting to save message: {'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", 'tool_name': 'search_web', 'tool_use_id': 'toolu_01QCXX5ZAjYRMEkEBV4by9cV', 'tool_input': {'search_query': '2024 US presidential election predictions and polls'}}
2024-09-09 15:48:28,966 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages "HTTP/2 201 Created"
2024-09-09 15:48:28,967 - INFO - Message saved successfully: {'id': '7eb25b49-dc23-4666-973d-1ce5ec4b4310', 'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", 'tool_name': 'search_web', 'tool_use_id': 'toolu_01QCXX5ZAjYRMEkEBV4by9cV', 'tool_input': {'search_query': '2024 US presidential election predictions and polls'}, 'tool_result': None, 'created_at': '2024-09-09T10:18:29.085574+00:00'}
2024-09-09 15:48:28,967 - INFO - Processing tool use: search_web for analysis 2a30dd6b-bae7-4d95-8032-21f8a1f20af1
2024-09-09 15:48:29,078 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_api_token?select=tavily_api_key&user_id=eq.a01fe001-ddb1-423e-aea4-a376d7740303 "HTTP/2 200 OK"
2024-09-09 15:48:29,079 - INFO - Tavily API key found: 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
2024-09-09 15:48:29,079 - INFO - Search query: 2024 US presidential election predictions and polls
2024-09-09 15:48:29,079 - INFO - User ID: a01fe001-ddb1-423e-aea4-a376d7740303
2024-09-09 15:48:29,079 - INFO - Tavily API key: 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
2024-09-09 15:48:29,079 - INFO - Sending request to Tavily API with payload: {'api_key': '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', 'query': '2024 US presidential election predictions and polls', 'search_depth': 'advanced', 'include_images': False, 'include_answer': True, 'include_raw_content': False, 'max_results': 5}
2024-09-09 15:48:33,658 - INFO - alllllllllllllllll Search results: {'query': '2024 US presidential election predictions and polls', 'follow_up_questions': None, 'answer': 'As of December 5, 2023, polls for the 2024 US presidential election show various matchups, including Biden vs. Trump and Biden vs. Haley. The data includes polls for general election matchups and specific states like Wisconsin, Georgia, and Arizona. The sources indicate ongoing polling data and forecasts for the upcoming election.', 'images': [], 'results': [{'title': '2024 Presidential Election Polls: Harris vs. Trump - 270toWin', 'url': 'https://www.270towin.com/2024-presidential-election-polls/', 'content': '2024 Presidential Election Polls: Biden vs. Trump - 270toWin', 'score': 0.99846923, 'raw_content': None}, {'title': '2024 Presidential Election Predictions | The Hill and DDHQ', 'url': 'https://elections2024.thehill.com/forecast/2024/president/', 'content': '2024 Presidential Election Forecast | The Hill and DDHQ', 'score': 0.9975561, 'raw_content': None}, {'title': 'Election 2024 Polls: Harris vs. Trump - The New York Times', 'url': 'https://www.nytimes.com/interactive/2024/us/elections/polls-president.html', 'content': 'Latest Election 2024 Polls: Biden vs. Trump', 'score': 0.9893886, 'raw_content': None}, {'title': '2024 Presidential Election Forecast Maps - 270toWin', 'url': 'https://www.270towin.com/2024-election-forecast-predictions/', 'content': 'The current electoral college ratings for the 2024 presidential election from Larry Sabato and the team at the\xa0University of Virginia Center for Politics. Use this map as a starting point to create and share your own 2024 presidential election forecast.\nJune 29:\xa0Initial 2024 ratings. The map is interactive; use it as a starting point to create and share your own 2024 presidential election forecast.\n The map is interactive; use it as a starting point to create and share your own 2024 presidential election forecast.\n Follow\n2024 Presidential Election Forecasts\nThese maps reflect the ratings of a number of quantitative and qualitative forecasters, as well as some consensus projections.', 'score': 0.9539661, 'raw_content': None}, {'title': 'President: general election : 2024 Polls | FiveThirtyEight', 'url': 'https://projects.fivethirtyeight.com/polls/president-general/2024/', 'content': 'Sort by date\nSAMPLE TYPES\nA\nADULTS\nV\nVOTERS\nLV\nLIKELY VOTERS\nRV\nREGISTERED VOTERS\nSAMPLE TYPES\nA\nADULTS\nV\nVOTERS\nLV\nLIKELY VOTERS\nRV\nREGISTERED VOTERS\nPolls\nending\nDec. 5, 2023\nPresident: general election, 2024\nBiden\nHaley\nBiden\nTrump\nKennedy\nStein\nWest\nBiden\nTrump\nDec. 4, 2023\nPresident: general election, 2024\nBiden\nTrump\nDec. 3, 2023\nPresident: general election, 2024\nBiden\nHaley\nBiden\nDeSantis\nBiden\nTrump\nKennedy\nManchin\nWest\nStein\nMapstead\nBiden\nTrump\nDec. 2, 2023\nPresident: general election, 2024\nBiden\nTrump\nBiden\nTrump\nKennedy\nWest\nBiden\nTrump\nKennedy\nWest\nBiden\nTrump\nKennedy\nWest\nNov. 30, 2023\nPresident: general election, 2024\nBiden\nTrump\nKennedy\nWest\nStein\nBiden\nTrump\nBiden\nHaley\nBiden\nDeSantis\nBiden\nTrump\nPresident: general election, Wisconsin, 2024\nBiden\nTrump\nBiden\nTrump\nKennedy\nStein\nWest\nPresident: general election, Georgia, 2024\nBiden\nTrump\nBiden\nTrump\nKennedy\nWest\nPresident: general election, Arizona, 2024\nBiden\nTrump\nBiden\nTrump\nKennedy\nWest\nIndicates a polling average for this poll type\nCandidate is an incumbent\nPartisan types\nDemocratic-funded\nRepublican-funded\nOther party-funded\nCampaign poll\nThe position of the flag indicates whether the organization is partisan. Approval polling average\nDo Americans Have A Favorable Opinion Of Donald Trump?\nFavorability polling average\nPoll type\nState\nDistrict\nPolitician/institution\nCycle\nElection type\nSubpopulation\nWho’s ahead in all?\n An updating average of 2020 presidential general election polls, accounting for each poll’s quality, sample size and recency\nKEY\nESTIMATE\n95% OF POLLS PROJECTED TO FALL IN THIS RANGE\nPolling averages are adjusted based on state and national polls, which means candidates’ averages can shift even if no new polls have been added to this page. UPDATED Dec. 9, 2023, at 7:52 PM\nLatest Polls\nCheck out our popular polling averages\nWho’s Ahead In Republican Primary Polls?\n No matching polls\nPolls from firms that are banned by FiveThirtyEight are not shown.\n', 'score': 0.9152046, 'raw_content': None}], 'response_time': 3.41}
2024-09-09 15:48:33,658 - INFO - Tool search_web executed successfully
2024-09-09 15:48:33,659 - INFO - Attempting to save message: {'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'user', 'content': 'Tool result', 'tool_result': "{'query': '2024 US presidential election predictions and polls', 'follow_up_questions': None, 'answer': 'As of December 5, 2023, polls for the 2024 US presidential election show various matchups, including Biden vs. Trump and Biden vs. Haley. The data includes polls for general election matchups and specific states like Wisconsin, Georgia, and Arizona. The sources indicate ongoing polling data and forecasts for the upcoming election.', 'images': [], 'results': [{'title': '2024 Presidential Election Polls: Harris vs. Trump - 270toWin', 'url': 'https://www.270towin.com/2024-presidential-election-polls/', 'content': '2024 Presidential Election Polls: Biden vs. Trump - 270toWin', 'score': 0.99846923, 'raw_content': None}, {'title': '2024 Presidential Election Predictions | The Hill and DDHQ', 'url': 'https://elections2024.thehill.com/forecast/2024/president/', 'content': '2024 Presidential Election Forecast | The Hill and DDHQ', 'score': 0.9975561, 'raw_content': None}, {'title': 'Election 2024 Polls: Harris vs. Trump - The New York Times', 'url': 'https://www.nytimes.com/interactive/2024/us/elections/polls-president.html', 'content': 'Latest Election 2024 Polls: Biden vs. Trump', 'score': 0.9893886, 'raw_content': None}, {'title': '2024 Presidential Election Forecast Maps - 270toWin', 'url': 'https://www.270towin.com/2024-election-forecast-predictions/', 'content': 'The current electoral college ratings for the 2024 presidential election from Larry Sabato and the team at the\\xa0University of Virginia Center for Politics. Use this map as a starting point to create and share your own 2024 presidential election forecast.\\nJune 29:\\xa0Initial 2024 ratings. The map is interactive; use it as a starting point to create and share your own 2024 presidential election forecast.\\n The map is interactive; use it as a starting point to create and share your own 2024 presidential election forecast.\\n Follow\\n2024 Presidential Election Forecasts\\nThese maps reflect the ratings of a number of quantitative and qualitative forecasters, as well as some consensus projections.', 'score': 0.9539661, 'raw_content': None}, {'title': 'President: general election : 2024 Polls | FiveThirtyEight', 'url': 'https://projects.fivethirtyeight.com/polls/president-general/2024/', 'content': 'Sort by date\\nSAMPLE TYPES\\nA\\nADULTS\\nV\\nVOTERS\\nLV\\nLIKELY VOTERS\\nRV\\nREGISTERED VOTERS\\nSAMPLE TYPES\\nA\\nADULTS\\nV\\nVOTERS\\nLV\\nLIKELY VOTERS\\nRV\\nREGISTERED VOTERS\\nPolls\\nending\\nDec. 5, 2023\\nPresident: general election, 2024\\nBiden\\nHaley\\nBiden\\nTrump\\nKennedy\\nStein\\nWest\\nBiden\\nTrump\\nDec. 4, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nDec. 3, 2023\\nPresident: general election, 2024\\nBiden\\nHaley\\nBiden\\nDeSantis\\nBiden\\nTrump\\nKennedy\\nManchin\\nWest\\nStein\\nMapstead\\nBiden\\nTrump\\nDec. 2, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nBiden\\nTrump\\nKennedy\\nWest\\nBiden\\nTrump\\nKennedy\\nWest\\nNov. 30, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nKennedy\\nWest\\nStein\\nBiden\\nTrump\\nBiden\\nHaley\\nBiden\\nDeSantis\\nBiden\\nTrump\\nPresident: general election, Wisconsin, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nStein\\nWest\\nPresident: general election, Georgia, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nPresident: general election, Arizona, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nIndicates a polling average for this poll type\\nCandidate is an incumbent\\nPartisan types\\nDemocratic-funded\\nRepublican-funded\\nOther party-funded\\nCampaign poll\\nThe position of the flag indicates whether the organization is partisan. Approval polling average\\nDo Americans Have A Favorable Opinion Of Donald Trump?\\nFavorability polling average\\nPoll type\\nState\\nDistrict\\nPolitician/institution\\nCycle\\nElection type\\nSubpopulation\\nWho’s ahead in all?\\n An updating average of 2020 presidential general election polls, accounting for each poll’s quality, sample size and recency\\nKEY\\nESTIMATE\\n95% OF POLLS PROJECTED TO FALL IN THIS RANGE\\nPolling averages are adjusted based on state and national polls, which means candidates’ averages can shift even if no new polls have been added to this page. UPDATED Dec. 9, 2023, at 7:52 PM\\nLatest Polls\\nCheck out our popular polling averages\\nWho’s Ahead In Republican Primary Polls?\\n No matching polls\\nPolls from firms that are banned by FiveThirtyEight are not shown.\\n', 'score': 0.9152046, 'raw_content': None}], 'response_time': 3.41}", 'tool_use_id': 'toolu_01QCXX5ZAjYRMEkEBV4by9cV'}
2024-09-09 15:48:33,753 - INFO - HTTP Request: POST https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages "HTTP/2 201 Created"
2024-09-09 15:48:33,758 - INFO - Message saved successfully: {'id': '3670ae97-9a80-4c2f-bc7e-6e5878371ad9', 'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'user', 'content': 'Tool result', 'tool_name': None, 'tool_use_id': 'toolu_01QCXX5ZAjYRMEkEBV4by9cV', 'tool_input': None, 'tool_result': "{'query': '2024 US presidential election predictions and polls', 'follow_up_questions': None, 'answer': 'As of December 5, 2023, polls for the 2024 US presidential election show various matchups, including Biden vs. Trump and Biden vs. Haley. The data includes polls for general election matchups and specific states like Wisconsin, Georgia, and Arizona. The sources indicate ongoing polling data and forecasts for the upcoming election.', 'images': [], 'results': [{'title': '2024 Presidential Election Polls: Harris vs. Trump - 270toWin', 'url': 'https://www.270towin.com/2024-presidential-election-polls/', 'content': '2024 Presidential Election Polls: Biden vs. Trump - 270toWin', 'score': 0.99846923, 'raw_content': None}, {'title': '2024 Presidential Election Predictions | The Hill and DDHQ', 'url': 'https://elections2024.thehill.com/forecast/2024/president/', 'content': '2024 Presidential Election Forecast | The Hill and DDHQ', 'score': 0.9975561, 'raw_content': None}, {'title': 'Election 2024 Polls: Harris vs. Trump - The New York Times', 'url': 'https://www.nytimes.com/interactive/2024/us/elections/polls-president.html', 'content': 'Latest Election 2024 Polls: Biden vs. Trump', 'score': 0.9893886, 'raw_content': None}, {'title': '2024 Presidential Election Forecast Maps - 270toWin', 'url': 'https://www.270towin.com/2024-election-forecast-predictions/', 'content': 'The current electoral college ratings for the 2024 presidential election from Larry Sabato and the team at the\\xa0University of Virginia Center for Politics. Use this map as a starting point to create and share your own 2024 presidential election forecast.\\nJune 29:\\xa0Initial 2024 ratings. The map is interactive; use it as a starting point to create and share your own 2024 presidential election forecast.\\n The map is interactive; use it as a starting point to create and share your own 2024 presidential election forecast.\\n Follow\\n2024 Presidential Election Forecasts\\nThese maps reflect the ratings of a number of quantitative and qualitative forecasters, as well as some consensus projections.', 'score': 0.9539661, 'raw_content': None}, {'title': 'President: general election : 2024 Polls | FiveThirtyEight', 'url': 'https://projects.fivethirtyeight.com/polls/president-general/2024/', 'content': 'Sort by date\\nSAMPLE TYPES\\nA\\nADULTS\\nV\\nVOTERS\\nLV\\nLIKELY VOTERS\\nRV\\nREGISTERED VOTERS\\nSAMPLE TYPES\\nA\\nADULTS\\nV\\nVOTERS\\nLV\\nLIKELY VOTERS\\nRV\\nREGISTERED VOTERS\\nPolls\\nending\\nDec. 5, 2023\\nPresident: general election, 2024\\nBiden\\nHaley\\nBiden\\nTrump\\nKennedy\\nStein\\nWest\\nBiden\\nTrump\\nDec. 4, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nDec. 3, 2023\\nPresident: general election, 2024\\nBiden\\nHaley\\nBiden\\nDeSantis\\nBiden\\nTrump\\nKennedy\\nManchin\\nWest\\nStein\\nMapstead\\nBiden\\nTrump\\nDec. 2, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nBiden\\nTrump\\nKennedy\\nWest\\nBiden\\nTrump\\nKennedy\\nWest\\nNov. 30, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nKennedy\\nWest\\nStein\\nBiden\\nTrump\\nBiden\\nHaley\\nBiden\\nDeSantis\\nBiden\\nTrump\\nPresident: general election, Wisconsin, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nStein\\nWest\\nPresident: general election, Georgia, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nPresident: general election, Arizona, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nIndicates a polling average for this poll type\\nCandidate is an incumbent\\nPartisan types\\nDemocratic-funded\\nRepublican-funded\\nOther party-funded\\nCampaign poll\\nThe position of the flag indicates whether the organization is partisan. Approval polling average\\nDo Americans Have A Favorable Opinion Of Donald Trump?\\nFavorability polling average\\nPoll type\\nState\\nDistrict\\nPolitician/institution\\nCycle\\nElection type\\nSubpopulation\\nWho’s ahead in all?\\n An updating average of 2020 presidential general election polls, accounting for each poll’s quality, sample size and recency\\nKEY\\nESTIMATE\\n95% OF POLLS PROJECTED TO FALL IN THIS RANGE\\nPolling averages are adjusted based on state and national polls, which means candidates’ averages can shift even if no new polls have been added to this page. UPDATED Dec. 9, 2023, at 7:52 PM\\nLatest Polls\\nCheck out our popular polling averages\\nWho’s Ahead In Republican Primary Polls?\\n No matching polls\\nPolls from firms that are banned by FiveThirtyEight are not shown.\\n', 'score': 0.9152046, 'raw_content': None}], 'response_time': 3.41}", 'created_at': '2024-09-09T10:18:33.882681+00:00'}
2024-09-09 15:48:33,858 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/user_plan?select=%2A&user_id=eq.a01fe001-ddb1-423e-aea4-a376d7740303 "HTTP/2 200 OK"
2024-09-09 15:48:33,859 - INFO - User plans fetched successfully: [{'id': 'ee8522d2-d935-4f21-9d0d-fd5127cc62fe', 'plan': 'freemium', 'user_id': 'a01fe001-ddb1-423e-aea4-a376d7740303', 'created_at': '2024-09-09T07:33:47.586069+00:00', 'updated_at': '2024-09-09T07:33:47.586069', 'keyword_limit': None}]
2024-09-09 15:48:33,859 - INFO - User plan type: [{'id': 'ee8522d2-d935-4f21-9d0d-fd5127cc62fe', 'plan': 'freemium', 'user_id': 'a01fe001-ddb1-423e-aea4-a376d7740303', 'created_at': '2024-09-09T07:33:47.586069+00:00', 'updated_at': '2024-09-09T07:33:47.586069', 'keyword_limit': None}]
2024-09-09 15:48:33,859 - INFO - API keys retrieved: Yes
2024-09-09 15:48:34,177 - INFO - Tools loaded and returned 4 tools
2024-09-09 15:48:34,178 - INFO - Number of tools loaded: 4
2024-09-09 15:48:34,284 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/analysis_messages?select=%2A&keyword_analysis_id=eq.2a30dd6b-bae7-4d95-8032-21f8a1f20af1&order=created_at "HTTP/2 200 OK"
2024-09-09 15:48:34,287 - INFO - Retrieved messages for chat_id: 2a30dd6b-bae7-4d95-8032-21f8a1f20af1
2024-09-09 15:48:34,287 - INFO - Messages: data=[{'id': '3ee76767-fcba-4d17-84bf-eabadfd39312', 'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'user', 'content': 'who is gonna win the  2024 US elections?', 'tool_name': None, 'tool_use_id': None, 'tool_input': None, 'tool_result': None, 'created_at': '2024-09-09T10:18:23.527997+00:00'}, {'id': 'ab5851f7-c8ba-4d3a-b677-bdee4ff83d41', 'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", 'tool_name': None, 'tool_use_id': None, 'tool_input': None, 'tool_result': None, 'created_at': '2024-09-09T10:18:28.980458+00:00'}, {'id': '7eb25b49-dc23-4666-973d-1ce5ec4b4310', 'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'assistant', 'content': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election.", 'tool_name': 'search_web', 'tool_use_id': 'toolu_01QCXX5ZAjYRMEkEBV4by9cV', 'tool_input': {'search_query': '2024 US presidential election predictions and polls'}, 'tool_result': None, 'created_at': '2024-09-09T10:18:29.085574+00:00'}, {'id': '3670ae97-9a80-4c2f-bc7e-6e5878371ad9', 'keyword_analysis_id': '2a30dd6b-bae7-4d95-8032-21f8a1f20af1', 'role': 'user', 'content': 'Tool result', 'tool_name': None, 'tool_use_id': 'toolu_01QCXX5ZAjYRMEkEBV4by9cV', 'tool_input': None, 'tool_result': "{'query': '2024 US presidential election predictions and polls', 'follow_up_questions': None, 'answer': 'As of December 5, 2023, polls for the 2024 US presidential election show various matchups, including Biden vs. Trump and Biden vs. Haley. The data includes polls for general election matchups and specific states like Wisconsin, Georgia, and Arizona. The sources indicate ongoing polling data and forecasts for the upcoming election.', 'images': [], 'results': [{'title': '2024 Presidential Election Polls: Harris vs. Trump - 270toWin', 'url': 'https://www.270towin.com/2024-presidential-election-polls/', 'content': '2024 Presidential Election Polls: Biden vs. Trump - 270toWin', 'score': 0.99846923, 'raw_content': None}, {'title': '2024 Presidential Election Predictions | The Hill and DDHQ', 'url': 'https://elections2024.thehill.com/forecast/2024/president/', 'content': '2024 Presidential Election Forecast | The Hill and DDHQ', 'score': 0.9975561, 'raw_content': None}, {'title': 'Election 2024 Polls: Harris vs. Trump - The New York Times', 'url': 'https://www.nytimes.com/interactive/2024/us/elections/polls-president.html', 'content': 'Latest Election 2024 Polls: Biden vs. Trump', 'score': 0.9893886, 'raw_content': None}, {'title': '2024 Presidential Election Forecast Maps - 270toWin', 'url': 'https://www.270towin.com/2024-election-forecast-predictions/', 'content': 'The current electoral college ratings for the 2024 presidential election from Larry Sabato and the team at the\\xa0University of Virginia Center for Politics. Use this map as a starting point to create and share your own 2024 presidential election forecast.\\nJune 29:\\xa0Initial 2024 ratings. The map is interactive; use it as a starting point to create and share your own 2024 presidential election forecast.\\n The map is interactive; use it as a starting point to create and share your own 2024 presidential election forecast.\\n Follow\\n2024 Presidential Election Forecasts\\nThese maps reflect the ratings of a number of quantitative and qualitative forecasters, as well as some consensus projections.', 'score': 0.9539661, 'raw_content': None}, {'title': 'President: general election : 2024 Polls | FiveThirtyEight', 'url': 'https://projects.fivethirtyeight.com/polls/president-general/2024/', 'content': 'Sort by date\\nSAMPLE TYPES\\nA\\nADULTS\\nV\\nVOTERS\\nLV\\nLIKELY VOTERS\\nRV\\nREGISTERED VOTERS\\nSAMPLE TYPES\\nA\\nADULTS\\nV\\nVOTERS\\nLV\\nLIKELY VOTERS\\nRV\\nREGISTERED VOTERS\\nPolls\\nending\\nDec. 5, 2023\\nPresident: general election, 2024\\nBiden\\nHaley\\nBiden\\nTrump\\nKennedy\\nStein\\nWest\\nBiden\\nTrump\\nDec. 4, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nDec. 3, 2023\\nPresident: general election, 2024\\nBiden\\nHaley\\nBiden\\nDeSantis\\nBiden\\nTrump\\nKennedy\\nManchin\\nWest\\nStein\\nMapstead\\nBiden\\nTrump\\nDec. 2, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nBiden\\nTrump\\nKennedy\\nWest\\nBiden\\nTrump\\nKennedy\\nWest\\nNov. 30, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nKennedy\\nWest\\nStein\\nBiden\\nTrump\\nBiden\\nHaley\\nBiden\\nDeSantis\\nBiden\\nTrump\\nPresident: general election, Wisconsin, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nStein\\nWest\\nPresident: general election, Georgia, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nPresident: general election, Arizona, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nIndicates a polling average for this poll type\\nCandidate is an incumbent\\nPartisan types\\nDemocratic-funded\\nRepublican-funded\\nOther party-funded\\nCampaign poll\\nThe position of the flag indicates whether the organization is partisan. Approval polling average\\nDo Americans Have A Favorable Opinion Of Donald Trump?\\nFavorability polling average\\nPoll type\\nState\\nDistrict\\nPolitician/institution\\nCycle\\nElection type\\nSubpopulation\\nWho’s ahead in all?\\n An updating average of 2020 presidential general election polls, accounting for each poll’s quality, sample size and recency\\nKEY\\nESTIMATE\\n95% OF POLLS PROJECTED TO FALL IN THIS RANGE\\nPolling averages are adjusted based on state and national polls, which means candidates’ averages can shift even if no new polls have been added to this page. UPDATED Dec. 9, 2023, at 7:52 PM\\nLatest Polls\\nCheck out our popular polling averages\\nWho’s Ahead In Republican Primary Polls?\\n No matching polls\\nPolls from firms that are banned by FiveThirtyEight are not shown.\\n', 'score': 0.9152046, 'raw_content': None}], 'response_time': 3.41}", 'created_at': '2024-09-09T10:18:33.882681+00:00'}] count=None
2024-09-09 15:48:34,288 - INFO - Conversation: [{'role': 'user', 'content': [{'type': 'text', 'text': 'who is gonna win the  2024 US elections?'}]}, {'role': 'assistant', 'content': [{'type': 'text', 'text': "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election."}]}, {'role': 'user', 'content': [{'type': 'text', 'text': 'Tool result'}, {'type': 'tool_result', 'tool_use_id': 'toolu_01QCXX5ZAjYRMEkEBV4by9cV', 'content': "{'query': '2024 US presidential election predictions and polls', 'follow_up_questions': None, 'answer': 'As of December 5, 2023, polls for the 2024 US presidential election show various matchups, including Biden vs. Trump and Biden vs. Haley. The data includes polls for general election matchups and specific states like Wisconsin, Georgia, and Arizona. The sources indicate ongoing polling data and forecasts for the upcoming election.', 'images': [], 'results': [{'title': '2024 Presidential Election Polls: Harris vs. Trump - 270toWin', 'url': 'https://www.270towin.com/2024-presidential-election-polls/', 'content': '2024 Presidential Election Polls: Biden vs. Trump - 270toWin', 'score': 0.99846923, 'raw_content': None}, {'title': '2024 Presidential Election Predictions | The Hill and DDHQ', 'url': 'https://elections2024.thehill.com/forecast/2024/president/', 'content': '2024 Presidential Election Forecast | The Hill and DDHQ', 'score': 0.9975561, 'raw_content': None}, {'title': 'Election 2024 Polls: Harris vs. Trump - The New York Times', 'url': 'https://www.nytimes.com/interactive/2024/us/elections/polls-president.html', 'content': 'Latest Election 2024 Polls: Biden vs. Trump', 'score': 0.9893886, 'raw_content': None}, {'title': '2024 Presidential Election Forecast Maps - 270toWin', 'url': 'https://www.270towin.com/2024-election-forecast-predictions/', 'content': 'The current electoral college ratings for the 2024 presidential election from Larry Sabato and the team at the\\xa0University of Virginia Center for Politics. Use this map as a starting point to create and share your own 2024 presidential election forecast.\\nJune 29:\\xa0Initial 2024 ratings. The map is interactive; use it as a starting point to create and share your own 2024 presidential election forecast.\\n The map is interactive; use it as a starting point to create and share your own 2024 presidential election forecast.\\n Follow\\n2024 Presidential Election Forecasts\\nThese maps reflect the ratings of a number of quantitative and qualitative forecasters, as well as some consensus projections.', 'score': 0.9539661, 'raw_content': None}, {'title': 'President: general election : 2024 Polls | FiveThirtyEight', 'url': 'https://projects.fivethirtyeight.com/polls/president-general/2024/', 'content': 'Sort by date\\nSAMPLE TYPES\\nA\\nADULTS\\nV\\nVOTERS\\nLV\\nLIKELY VOTERS\\nRV\\nREGISTERED VOTERS\\nSAMPLE TYPES\\nA\\nADULTS\\nV\\nVOTERS\\nLV\\nLIKELY VOTERS\\nRV\\nREGISTERED VOTERS\\nPolls\\nending\\nDec. 5, 2023\\nPresident: general election, 2024\\nBiden\\nHaley\\nBiden\\nTrump\\nKennedy\\nStein\\nWest\\nBiden\\nTrump\\nDec. 4, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nDec. 3, 2023\\nPresident: general election, 2024\\nBiden\\nHaley\\nBiden\\nDeSantis\\nBiden\\nTrump\\nKennedy\\nManchin\\nWest\\nStein\\nMapstead\\nBiden\\nTrump\\nDec. 2, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nBiden\\nTrump\\nKennedy\\nWest\\nBiden\\nTrump\\nKennedy\\nWest\\nNov. 30, 2023\\nPresident: general election, 2024\\nBiden\\nTrump\\nKennedy\\nWest\\nStein\\nBiden\\nTrump\\nBiden\\nHaley\\nBiden\\nDeSantis\\nBiden\\nTrump\\nPresident: general election, Wisconsin, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nStein\\nWest\\nPresident: general election, Georgia, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nPresident: general election, Arizona, 2024\\nBiden\\nTrump\\nBiden\\nTrump\\nKennedy\\nWest\\nIndicates a polling average for this poll type\\nCandidate is an incumbent\\nPartisan types\\nDemocratic-funded\\nRepublican-funded\\nOther party-funded\\nCampaign poll\\nThe position of the flag indicates whether the organization is partisan. Approval polling average\\nDo Americans Have A Favorable Opinion Of Donald Trump?\\nFavorability polling average\\nPoll type\\nState\\nDistrict\\nPolitician/institution\\nCycle\\nElection type\\nSubpopulation\\nWho’s ahead in all?\\n An updating average of 2020 presidential general election polls, accounting for each poll’s quality, sample size and recency\\nKEY\\nESTIMATE\\n95% OF POLLS PROJECTED TO FALL IN THIS RANGE\\nPolling averages are adjusted based on state and national polls, which means candidates’ averages can shift even if no new polls have been added to this page. UPDATED Dec. 9, 2023, at 7:52 PM\\nLatest Polls\\nCheck out our popular polling averages\\nWho’s Ahead In Republican Primary Polls?\\n No matching polls\\nPolls from firms that are banned by FiveThirtyEight are not shown.\\n', 'score': 0.9152046, 'raw_content': None}], 'response_time': 3.41}"}]}]
2024-09-09 15:48:34,289 - INFO - Total tokens in conversation: 5178
2024-09-09 15:48:34,289 - INFO - Conversation context length: 3
2024-09-09 15:48:34,289 - INFO - Sending request to Anthropic API
2024-09-09 15:48:34,289 - INFO - Conversation context: [
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "who is gonna win the  2024 US elections?"
      }
    ]
  },
  {
    "role": "assistant",
    "content": [
      {
        "type": "text",
        "text": "To analyze the current situation regarding the 2024 US elections and provide a balanced summary, I'll need to gather information from various sources. Let's start by searching for recent news and predictions about the upcoming election."
      }
    ]
  },
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "Tool result"
      }
    ]
  }
]
2024-09-09 15:48:34,289 - INFO - Number of messages in conversation: 3
2024-09-09 15:48:35,664 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 429 Too Many Requests"
2024-09-09 15:48:35,665 - INFO - Retrying request to /v1/messages in 0.885478 seconds
2024-09-09 15:48:36,935 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 429 Too Many Requests"
2024-09-09 15:48:36,936 - INFO - Retrying request to /v1/messages in 1.878719 seconds
2024-09-09 15:48:39,192 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 429 Too Many Requests"
2024-09-09 15:48:39,193 - ERROR - Error in process_conversation: Error code: 429 - {'type': 'error', 'error': {'type': 'rate_limit_error', 'message': 'Number of request tokens has exceeded your daily rate limit (https://docs.anthropic.com/en/api/rate-limits); see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase.'}}
2024-09-09 15:48:39,336 - INFO - HTTP Request: PATCH https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?id=eq.2a30dd6b-bae7-4d95-8032-21f8a1f20af1 "HTTP/2 200 OK"
2024-09-09 15:48:39,340 - ERROR - Error processing tool use for search_web: Error code: 429 - {'type': 'error', 'error': {'type': 'rate_limit_error', 'message': 'Number of request tokens has exceeded your daily rate limit (https://docs.anthropic.com/en/api/rate-limits); see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase.'}}
2024-09-09 15:48:39,441 - INFO - HTTP Request: PATCH https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?id=eq.2a30dd6b-bae7-4d95-8032-21f8a1f20af1 "HTTP/2 200 OK"
2024-09-09 15:48:39,442 - ERROR - Error in process_conversation: Error code: 429 - {'type': 'error', 'error': {'type': 'rate_limit_error', 'message': 'Number of request tokens has exceeded your daily rate limit (https://docs.anthropic.com/en/api/rate-limits); see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase.'}}
2024-09-09 15:48:39,542 - INFO - HTTP Request: PATCH https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?id=eq.2a30dd6b-bae7-4d95-8032-21f8a1f20af1 "HTTP/2 200 OK"
2024-09-09 15:48:39,543 - ERROR - Error in handle_chat: Error code: 429 - {'type': 'error', 'error': {'type': 'rate_limit_error', 'message': 'Number of request tokens has exceeded your daily rate limit (https://docs.anthropic.com/en/api/rate-limits); see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase.'}}
2024-09-09 15:48:39,655 - INFO - HTTP Request: PATCH https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?id=eq.2a30dd6b-bae7-4d95-8032-21f8a1f20af1 "HTTP/2 200 OK"
2024-09-09 15:48:39,658 - INFO - 127.0.0.1 - - [09/Sep/2024 15:48:39] "POST /startanalysis/5eb27417-cd60-4c5e-a37b-d2eece9341e0 HTTP/1.1" 200 -
2024-09-09 15:48:39,832 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/auth/v1/user "HTTP/2 200 OK"
2024-09-09 15:48:39,930 - INFO - HTTP Request: GET https://ihmwyribamieeumszjjv.supabase.co/rest/v1/keyword_analysis?select=%2A&keyword_id=eq.5eb27417-cd60-4c5e-a37b-d2eece9341e0&order=created_at.desc&limit=1 "HTTP/2 200 OK"
2024-09-09 15:48:39,931 - INFO - 127.0.0.1 - - [09/Sep/2024 15:48:39] "GET /task_status/5eb27417-cd60-4c5e-a37b-d2eece9341e0 HTTP/1.1" 200 -
